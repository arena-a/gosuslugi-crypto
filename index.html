<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Криптообменник</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 20px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #38bdf8;
        }
        input:checked + .slider:before {
            transform: translateX(20px);
        }
        .online-status {
            width: 12px;
            height: 12px;
            background-color: #34c759;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        .chat-message {
            background-color: #f1f5f9;
            border-radius: 8px;
            padding: 8px;
            margin-bottom: 8px;
        }
        .chat-message .username {
            font-weight: bold;
            color: #0ea5e9;
        }
        .chat-message .time {
            font-size: 0.85rem;
            color: #6b7280;
            margin-left: 8px;
        }
        #profile-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 50;
            background-color: white;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            max-height: 80vh;
            overflow-y: auto;
        }
        #profile-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 40;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="welcome-page" class="flex flex-col items-center justify-center h-screen bg-sky-400 text-white p-4">
        <h1 class="text-4xl font-bold mb-4 text-center">Добро пожаловать на платформу Крипто Оборот.</h1>
        <p class="text-lg mb-2 text-center">Здесь вы можете купить или обменять криптовалюту,</p>
        <p class="text-lg mb-4 text-center">так же вывести безопасно на ваш счет.</p>
        <button onclick="showLoginPage()" class="bg-white text-sky-400 font-bold py-2 px-6 rounded hover:bg-gray-200">Продолжить</button>
    </div>

    <div id="login-page" class="flex flex-col items-center justify-center h-screen bg-gray-100 p-4 hidden">
        <h1 class="text-4xl font-bold mb-6 text-sky-400">КриптоОборот</h1>
        <div class="bg-white p-6 rounded-lg shadow-md w-full max-w-md">
            <div class="mb-4">
                <label for="login-username" class="block text-sm font-medium text-gray-700">Логин</label>
                <input type="text" id="login-username" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400" placeholder="Введите логин">
            </div>
            <div class="mb-4">
                <label for="login-password" class="block text-sm font-medium text-gray-700">Пароль</label>
                <input type="password" id="login-password" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400" placeholder="Введите пароль">
            </div>
            <button onclick="login()" class="bg-sky-300 hover:bg-sky-500 text-white font-bold py-2 px-4 rounded w-full mb-4">Войти</button>
            <button onclick="alert('Вход через Госуслуги будет добавлен позже.')" class="flex items-center justify-center bg-gray-300 hover:bg-gray-400 text-gray-700 font-bold py-2 px-4 rounded w-full mb-4">
                <img src="png3.png" alt="Госуслуги" class="w-6 h-6 mr-2"/>
                Войти через Госуслуги
            </button>
            <button onclick="showRegisterPage()" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded w-full">Зарегистрироваться</button>
        </div>
    </div>

    <div id="register-page" class="flex flex-col items-center justify-center h-screen bg-gray-100 p-4 hidden">
        <h1 class="text-4xl font-bold mb-6 text-sky-400">Регистрация</h1>
        <div class="bg-white p-6 rounded-lg shadow-md w-full max-w-md">
            <div class="mb-4">
                <label for="register-name" class="block text-sm font-medium text-gray-700">Имя</label>
                <input type="text" id="register-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400" placeholder="Введите ваше имя">
            </div>
            <div class="mb-4">
                <label for="register-email" class="block text-sm font-medium text-gray-700">Email</label>
                <input type="email" id="register-email" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400" placeholder="Введите ваш email">
            </div>
            <div class="mb-4">
                <label for="register-password" class="block text-sm font-medium text-gray-700">Пароль</label>
                <input type="password" id="register-password" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400" placeholder="Введите пароль">
            </div>
            <div class="mb-4">
                <label for="register-phone" class="block text-sm font-medium text-gray-700">Номер телефона</label>
                <input type="tel" id="register-phone" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400" placeholder="+7 (___) ___-__-__">
            </div>
            <button onclick="register()" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded w-full mb-4">Зарегистрироваться</button>
            <button onclick="showLoginPage()" class="bg-gray-300 hover:bg-gray-400 text-gray-700 font-bold py-2 px-4 rounded w-full">Назад</button>
        </div>
    </div>

    <div id="main-content" class="hidden">
        <header class="bg-sky-400 text-white p-4 text-center">
            <div class="flex justify-between items-start">
                <div>
                    <h1 class="text-3xl font-bold">Криптообменник</h1>
                    <p class="mt-2">Покупка, продажа и майнинг криптовалют</p>
                </div>
                <div class="user-info text-left">
                    <div class="flex items-center mb-2">
                        <div class="online-status"></div>
                        <span id="username-display" class="username text-lg">Иван Иванов</span>
                    </div>
                    <button onclick="toggleProfile()" class="bg-sky-300 hover:bg-sky-500 text-white font-bold py-2 px-4 rounded mb-2">Показать профиль</button>
                </div>
            </div>
        </header>

        <div id="profile-overlay" class="hidden" onclick="toggleProfile()"></div>
        <div id="profile-modal" class="hidden max-w-md w-full">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-semibold">Профиль</h3>
                <button onclick="toggleProfile()" class="text-gray-500 hover:text-gray-700 text-2xl">×</button>
            </div>
            <div class="mb-4">
                <h4 class="text-lg font-medium">Мои документы</h4>
                <p><strong>СНИЛС:</strong> 123-456-789 00</p>
                <p><strong>ИНН:</strong> 123456789012</p>
                <p><strong>ПАСПОРТНЫЕ ДАННЫЕ:</strong> Серия AB № 1234567, выдан 01.01.2010</p>
            </div>
            <div class="mb-4">
                <h4 class="text-lg font-medium">Личные данные</h4>
                <p><strong>ИМЯ:</strong> Иван</p>
                <p><strong>ФАМИЛИЯ:</strong> Иванов</p>
                <p><strong>ОТЧЕСТВО:</strong> Иванович</p>
                <p><strong>ДАТА РОЖДЕНИЯ:</strong> 15.03.1990</p>
                <p><strong>СТРАНА:</strong> Россия</p>
                <p><strong>ГОРОД:</strong> Москва</p>
                <p><strong>АДРЕС:</strong> ул. Примерная, д. 123</p>
            </div>
            <div class="mb-4">
                <h4 class="text-lg font-medium">Мое оборудование</h4>
                <p><strong>МОЩНОСТЬ:</strong> 1234W</p>
                <p><strong>ПРОИЗВОДИТЕЛЬ:</strong> D-Link</p>
                <p><strong>МОДЕЛЬ:</strong> DAP-1420</p>
                <p><strong>СЕРИЙНЫЙ НОМЕР:</strong> SN RAX0CXBC01977</p>
            </div>
            <div class="flex gap-4">
                <img src="png.png" alt="Изображение 1" class="w-32 h-32"/>
                <img src="png2.png" alt="Изображение 2" class="w-32 h-32"/>
            </div>
        </div>

        <nav class="bg-gray-800 text-white p-4">
            <ul class="flex flex-wrap gap-4 justify-center">
                <li><button onclick="showPage('transactions')" class="nav-tab px-4 py-2 rounded hover:bg-gray-600">Транзакции</button></li>
                <li><button onclick="showPage('mining')" class="nav-tab px-4 py-2 rounded hover:bg-gray-600">Майнинг</button></li>
                <li><button onclick="showPage('taxes')" class="nav-tab px-4 py-2 rounded hover:bg-gray-600">Налоги</button></li>
                <li><button onclick="showPage('wallet')" class="nav-tab px-4 py-2 rounded hover:bg-gray-600">Кошелек</button></li>
                <li><button onclick="showPage('trading')" class="nav-tab px-4 py-2 rounded hover:bg-gray-600">Торговля</button></li>
                <li><button onclick="showPage('p2p')" class="nav-tab px-4 py-2 rounded hover:bg-gray-600">P2P</button></li>
                <li><button onclick="showPage('chat')" class="nav-tab px-4 py-2 rounded hover:bg-gray-600">Чат</button></li>
                <li><button onclick="showPage('support')" class="nav-tab px-4 py-2 rounded hover:bg-gray-600">Поддержка</button></li>
            </ul>
        </nav>

        <main class="max-w-6xl mx-auto mt-8 p-4">
            <section id="transactions" class="page bg-white shadow-md rounded-lg p-6 hidden">
                <h2 class="text-2xl font-semibold mb-4">Транзакции</h2>
                <div class="mb-6">
                    <h3 class="text-xl font-medium mb-2">График биткоина (BTC)</h3>
                    <canvas id="bitcoinChart" class="w-full" style="max-height: 300px;"></canvas>
                </div>
                <div>
                    <h3 class="text-xl font-medium mb-2">Последние транзакции по BTC</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200">
                            <thead>
                                <tr>
                                    <th class="py-2 px-4 border-b text-left">Дата</th>
                                    <th class="py-2 px-4 border-b text-left">Тип</th>
                                    <th class="py-2 px-4 border-b text-left">Количество</th>
                                    <th class="py-2 px-4 border-b text-left">Сумма (RUB)</th>
                                    <th class="py-2 px-4 border-b text-left">Статус</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="py-2 px-4 border-b">01.05.2025</td>
                                    <td class="py-2 px-4 border-b">Покупка</td>
                                    <td class="py-2 px-4 border-b">0.02 BTC</td>
                                    <td class="py-2 px-4 border-b">250,000 RUB</td>
                                    <td class="py-2 px-4 border-b">Завершено</td>
                                </tr>
                                <tr>
                                    <td class="py-2 px-4 border-b">30.04.2025</td>
                                    <td class="py-2 px-4 border-b">Продажа</td>
                                    <td class="py-2 px-4 border-b">0.01 BTC</td>
                                    <td class="py-2 px-4 border-b">125,000 RUB</td>
                                    <td class="py-2 px-4 border-b">Завершено</td>
                                </tr>
                                <tr>
                                    <td class="py-2 px-4 border-b">29.04.2025</td>
                                    <td class="py-2 px-4 border-b">Покупка</td>
                                    <td class="py-2 px-4 border-b">0.015 BTC</td>
                                    <td class="py-2 px-4 border-b">187,500 RUB</td>
                                    <td class="py-2 px-4 border-b">Завершено</td>
                                </tr>
                                <tr>
                                    <td class="py-2 px-4 border-b">28.04.2025</td>
                                    <td class="py-2 px-4 border-b">Продажа</td>
                                    <td class="py-2 px-4 border-b">0.03 BTC</td>
                                    <td class="py-2 px-4 border-b">375,000 RUB</td>
                                    <td class="py-2 px-4 border-b">Завершено</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="mining" class="page bg-white shadow-md rounded-lg p-6 hidden">
                <h2 class="text-2xl font-semibold mb-4">Майнинг</h2>
                <h3 class="text-xl font-medium mb-2">Майнинг</h3>
                <table class="min-w-full bg-white border border-gray-200 mb-6">
                    <thead>
                        <tr>
                            <th class="py-2 px-4 border-b text-left">Параметр</th>
                            <th class="py-2 px-4 border-b text-left">Значение</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="py-2 px-4 border-b">Потребляемая мощность</td>
                            <td class="py-2 px-4 border-b">3</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4 border-b">Тариф Воронеж</td>
                            <td class="py-2 px-4 border-b">3,2/квт</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4 border-b">Затраты</td>
                            <td class="py-2 px-4 border-b">7000 руб</td>
                        </tr>
                    </tbody>
                </table>
                <h3 class="text-xl font-medium mb-2">Оборудование</h3>
                <table class="min-w-full bg-white border border-gray-200 mb-6">
                    <thead>
                        <tr>
                            <th class="py-2 px-4 border-b text-left">Параметр</th>
                            <th class="py-2 px-4 border-b text-left">Значение</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="py-2 px-4 border-b">Текущая стоимость</td>
                            <td class="py-2 px-4 border-b">60000</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4 border-b">К возмещению апрель</td>
                            <td class="py-2 px-4 border-b">1.250</td>
                        </tr>
                    </tbody>
                </table>
                <div class="bg-gray-100 p-4 rounded-lg mb-6">
                    <h3 class="text-xl font-medium mb-2">Итог</h3>
                    <p>Общая стоимость возможного возмещения: 8250 руб</p>
                    <p>Электроэнергия к возмещению в апреле: 7000 rub</p>
                    <p>Продано BTC на сумму: 12000</p>
                    <p>Итого к уплате: 12000-8250=3750</p>
                    <p>3750 * 13%: 487,5 руб</p>
                </div>
                <button onclick="alert('Функционал скачивания справки 2-НДФЛ будет добавлен позже.')" class="bg-sky-300 hover:bg-sky-500 text-white font-bold py-2 px-4 rounded">
                    Скачать справку 2-НДФЛ
                </button>
            </section>

            <section id="taxes" class="page bg-white shadow-md rounded-lg p-6 hidden">
                <h2 class="text-2xl font-semibold mb-4">Налоги</h2>
                <div class="flex gap-4 mb-6">
                    <button onclick="showTaxSection('purchases')" class="tax-tab bg-sky-300 hover:bg-sky-500 text-white font-bold py-2 px-4 rounded">История покупок</button>
                    <button onclick="showTaxSection('sales')" class="tax-tab bg-gray-300 hover:bg-gray-400 text-gray-700 font-bold py-2 px-4 rounded">История продаж</button>
                </div>
                <div id="purchases" class="tax-section">
                    <h3 class="text-xl font-medium mb-2">История покупок</h3>
                    <table class="min-w-full bg-white border border-gray-200 mb-6">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b text-left">Дата</th>
                                <th class="py-2 px-4 border-b text-left">Тип</th>
                                <th class="py-2 px-4 border-b text-left">Сумма (RUB)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">28.01.24</td>
                                <td class="py-2 px-4 border-b">300 $UD по 85 RUB</td>
                                <td class="py-2 px-4 border-b">25,500 RUB</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">29.04.24</td>
                                <td class="py-2 px-4 border-b">300 $UD по 75 RUB</td>
                                <td class="py-2 px-4 border-b">22,500 RUB</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">02.08.24</td>
                                <td class="py-2 px-4 border-b">400 $UD по 90 RUB</td>
                                <td class="py-2 px-4 border-b">36,000 RUB</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">01.04.2025</td>
                                <td class="py-2 px-4 border-b">500 $UD по 110 RUB</td>
                                <td class="py-2 px-4 border-b">55,000 RUB</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">05.04.2025</td>
                                <td class="py-2 px-4 border-b">500 $UD по 110 RUB</td>
                                <td class="py-2 px-4 border-b">55,000 RUB</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">07.04.2025</td>
                                <td class="py-2 px-4 border-b">500 $UD по 120 RUB</td>
                                <td class="py-2 px-4 border-b">60,000 RUB</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b font-bold">Итого</td>
                                <td class="py-2 px-4 border-b font-bold">Средняя цена: 98.33 RUB</td>
                                <td class="py-2 px-4 border-b font-bold">253,500 RUB</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div id="sales" class="tax-section hidden">
                    <h3 class="text-xl font-medium mb-2">История продаж</h3>
                    <table class="min-w-full bg-white border border-gray-200 mb-6">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b text-left">Дата</th>
                                <th class="py-2 px-4 border-b text-left">Тип</th>
                                <th class="py-2 px-4 border-b text-left">Сумма (RUB)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-2 px-4 border-b">15.02.24</td>
                                <td class="py-2 px-4 border-b">200 $UD по 90 RUB</td>
                                <td class="py-2 px-4 border-b">18,000 RUB</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">10.05.24</td>
                                <td class="py-2 px-4 border-b">300 $UD по 80 RUB</td>
                                <td class="py-2 px-4 border-b">24,000 RUB</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">20.08.24</td>
                                <td class="py-2 px-4 border-b">400 $UD по 95 RUB</td>
                                <td class="py-2 px-4 border-b">38,000 RUB</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">10.04.2025</td>
                                <td class="py-2 px-4 border-b">500 $UD по 115 RUB</td>
                                <td class="py-2 px-4 border-b">57,500 RUB</td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b font-bold">Итого</td>
                                <td class="py-2 px-4 border-b font-bold">Средняя цена: 95 RUB</td>
                                <td class="py-2 px-4 border-b font-bold">137,500 RUB</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="bg-gray-100 p-4 rounded-lg mb-6">
                    <h3 class="text-xl font-medium mb-2">Налог</h3>
                    <p>Сумма с продаж: 137,500 RUB</p>
                    <p>Налог (13% от суммы с продаж): 137,500 × 0.13 = 17,875 RUB</p>
                </div>
                <table class="min-w-full bg-white border border-gray-200">
                    <thead>
                        <tr>
                            <th class="py-2 px-4 border-b text-left">Дата</th>
                            <th class="py-2 px-4 border-b text-left">Тип</th>
                            <th class="py-2 px-4 border-b text-left">Сумма (RUB)</th>
                            <th class="py-2 px-4 border-b text-left">Налог (13%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="py-2 px-4 border-b">28.01.24</td>
                            <td class="py-2 px-4 border-b">300 $UD по 85 RUB</td>
                            <td class="py-2 px-4 border-b">25,500 RUB</td>
                            <td class="py-2 px-4 border-b">3,315 RUB</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4 border-b">29.04.24</td>
                            <td class="py-2 px-4 border-b">300 $UD по 75 RUB</td>
                            <td class="py-2 px-4 border-b">22,500 RUB</td>
                            <td class="py-2 px-4 border-b">2,925 RUB</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4 border-b">02.08.24</td>
                            <td class="py-2 px-4 border-b">400 $UD по 90 RUB</td>
                            <td class="py-2 px-4 border-b">36,000 RUB</td>
                            <td class="py-2 px-4 border-b">4,680 RUB</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4 border-b">01.04.2025</td>
                            <td class="py-2 px-4 border-b">500 $UD по 110 RUB</td>
                            <td class="py-2 px-4 border-b">55,000 RUB</td>
                            <td class="py-2 px-4 border-b">7,150 RUB</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4 border-b">05.04.2025</td>
                            <td class="py-2 px-4 border-b">500 $UD по 110 RUB</td>
                            <td class="py-2 px-4 border-b">55,000 RUB</td>
                            <td class="py-2 px-4 border-b">7,150 RUB</td>
                        </tr>
                        <tr>
                            <td class="py-2 px-4 border-b">07.04.2025</td>
                            <td class="py-2 px-4 border-b">500 $UD по 120 RUB</td>
                            <td class="py-2 px-4 border-b">60,000 RUB</td>
                            <td class="py-2 px-4 border-b">7,800 RUB</td>
                        </tr>
                    </tbody>
                </table>
                <p class="mt-4">Сумма налогов в апреле: 2600+7150+487,5=10237,5</p>
            </section>

            <section id="wallet" class="page bg-white shadow-md rounded-lg p-6 hidden">
                <h2 class="text-2xl font-semibold mb-4">Кошелек</h2>
                <div class="bg-white border-2 border-sky-400 p-4 rounded-lg mb-6">
                    <h3 class="text-xl font-medium mb-2">Мои активы</h3>
                    <p>RUB: 50,000 RUB</p>
                    <p>$UD: 1,200 $UD</p>
                    <p>USDT: 300 USDT</p>
                    <p>BTC: 0.05 BTC</p>
                    <p>ETH: 2 ETH</p>
                    <p>DOGE: 10,000 DOGE</p>
                </div>
                <div class="border-2 border-sky-400 p-4 rounded-lg mb-6">
                    <h3 class="text-xl font-medium mb-2">Пополнить</h3>
                    <div class="mb-4">
                        <label for="deposit-bank" class="block text-sm font-medium text-gray-700">Банк</label>
                        <select id="deposit-bank" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400">
                            <option>Сбербанк</option>
                            <option>Т-Банк</option>
                            <option>Альфа-Банк</option>
                            <option>ВТБ</option>
                            <option>Россельхозбанк</option>
                        </select>
                    </div>
                    <p class="mb-2">QR-код для пополнения:</p>
                    <img src="png5.png" alt="QR-код" class="w-32 h-32"/>
                    <p class="mt-2">Адрес для пополнения: 0x1234567890abcdef1234567890abcdef12345678</p>
                </div>
                <div class="border-2 border-sky-400 p-4 rounded-lg mb-6">
                    <h3 class="text-xl font-medium mb-2">Перевод</h3>
                    <div class="mb-4">
                        <label for="transfer-bank" class="block text-sm font-medium text-gray-700">Банк</label>
                        <select id="transfer-bank" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400">
                            <option>Сбербанк</option>
                            <option>Т-Банк</option>
                            <option>Альфа-Банк</option>
                            <option>ВТБ</option>
                            <option>Россельхозбанк</option>
                        </select>
                    </div>
                    <p class="mb-2">QR-код для перевода:</p>
                    <img src="png5.png" alt="QR-код" class="w-32 h-32"/>
                    <p class="mt-2">Адрес для перевода: 0xabcdef1234567890abcdef1234567890abcdef12</p>
                    <p>Способ оплаты: СПБ</p>
                    <p>Номер телефона: +7 (920) 172-90-82</p>
                    <p>Номер банковской карты: 2200 1300 4612 8420</p>
                </div>
                <div class="border-2 border-sky-400 p-4 rounded-lg mb-6">
                    <h3 class="text-xl font-medium mb-2">Внутренний перевод</h3>
                    <p>user@example.com</p>
                    <p>JSJSSJ</p>
                    <p class="mb-2">QR-код:</p>
                    <img src="png5.png" alt="QR-код" class="w-32 h-32"/>
                </div>
            </section>

            <section id="trading" class="page bg-white shadow-md rounded-lg p-6 hidden">
                <h2 class="text-2xl font-semibold mb-4">Торговля</h2>
                <div class="mb-4">
                    <label for="trading-pair" class="block text-sm font-medium text-gray-700">Торговая пара</label>
                    <select id="trading-pair" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400" onchange="updateTradingPair()">
                        <option value="BTC/USDT">BTC/USDT</option>
                        <option value="ETH/USDT">ETH/USDT</option>
                        <option value="DOGE/USDT">DOGE/USDT</option>
                        <option value="SOL/USDT">SOL/USDT</option>
                        <option value="$UD/USDT">$UD/USDT</option>
                    </select>
                </div>
                <div class="mb-4">
                    <p>Доступно: 10,000 USDT</p>
                </div>
                <div class="mb-4">
                    <label for="order-type" class="block text-sm font-medium text-gray-700">Тип ордера</label>
                    <select id="order-type" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400" onchange="updateOrderType()">
                        <option value="limit">Лимитный</option>
                        <option value="market">Рыночный</option>
                        <option value="stop-limit">Стоп-лимит</option>
                        <option value="stop-market">Стоп-рынок</option>
                    </select>
                </div>
                <div id="stop-price-section" class="mb-4 hidden">
                    <label for="stop-price" class="block text-sm font-medium text-gray-700">Стоп-цена</label>
                    <div class="flex items-center">
                        <input type="number" id="stop-price" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400" placeholder="0.00">
                        <span class="ml-2 text-gray-500">USDT</span>
                    </div>
                </div>
                <div id="limit-price-section" class="mb-4">
                    <label for="limit-price" class="block text-sm font-medium text-gray-700">Лимитная цена</label>
                    <div class="flex items-center">
                        <input type="number" id="limit-price" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400" placeholder="0.00" oninput="updateOrderVolume()">
                        <span class="ml-2 text-gray-500">USDT</span>
                    </div>
                </div>
                <div class="mb-4">
                    <label for="amount" class="block text-sm font-medium text-gray-700">Количество</label>
                    <div class="flex items-center">
                        <input type="number" id="amount" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400" placeholder="0.00" step="0.000001" oninput="updateSlider(); updateOrderVolume()">
                        <span class="ml-2 text-gray-500" id="amount-token">BTC</span>
                    </div>
                </div>
                <div class="mb-4">
                    <input type="range" id="amount-slider" min="0" max="100" value="0" step="0.000001" class="w-full" oninput="updateAmount()">
                </div>
                <div class="mb-4">
                    <label for="order-volume-select" class="block text-sm font-medium text-gray-700">Выбрать объем ордера</label>
                    <select id="order-volume-select" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400" onchange="updateAmountFromVolume()">
                        <option value="0">Выберите объем</option>
                        <option value="100">100 USDT</option>
                        <option value="500">500 USDT</option>
                        <option value="1000">1,000 USDT</option>
                        <option value="5000">5,000 USDT</option>
                        <option value="10000">10,000 USDT</option>
                    </select>
                </div>
                <div class="mb-4 flex items-center">
                    <label class="flex items-center">
                        <span class="mr-2 text-sm font-medium text-gray-700">Маржа</span>
                        <div class="toggle-switch">
                            <input type="checkbox" id="margin-toggle">
                            <span class="slider"></span>
                        </div>
                    </label>
                </div>
                <div class="flex gap-4 mb-4">
                    <label class="flex items-center">
                        <input type="checkbox" class="rounded border-gray-300 text-sky-400 shadow-sm focus:border-sky-400 focus:ring-sky-400">
                        <span class="ml-2 text-sm text-gray-700">TP/SL</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" class="rounded border-gray-300 text-sky-400 shadow-sm focus:border-sky-400 focus:ring-sky-400">
                        <span class="ml-2 text-sm text-gray-700">Post-Only</span>
                    </label>
                </div>
                <div class="flex gap-4">
                    <button onclick="toggleTradeAction('buy')" id="buy-button" class="trade-action bg-green-500 text-white font-bold py-2 px-4 rounded w-full">КУПИТЬ</button>
                    <button onclick="toggleTradeAction('sell')" id="sell-button" class="trade-action bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded w-full">ПРОДАТЬ</button>
                </div>
            </section>

            <section id="p2p" class="page bg-white shadow-md rounded-lg p-6">
                <h2 class="text-2xl font-semibold mb-4">P2P Торговля</h2>
                <div class="flex flex-col md:flex-row gap-4 mb-6">
                    <div>
                        <label for="crypto" class="block text-sm font-medium text-gray-700">Криптовалюта</label>
                        <select id="crypto" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400">
                            <option>USDT</option>
                            <option>USDC</option>
                            <option>BTC</option>
                        </select>
                    </div>
                    <div>
                        <label for="payment" class="block text-sm font-medium text-gray-700">БАНКИ</label>
                        <select id="payment" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400">
                            <option>сбер</option>
                            <option>т-банк</option>
                            <option>альфа</option>
                            <option>втб</option>
                            <option>россельхоз</option>
                        </select>
                    </div>
                </div>
                <div class="flex gap-4 mb-6">
                    <button onclick="showP2PAction('buy')" class="p2p-action bg-sky-300 text-white font-bold py-2 px-4 rounded">КУПИТЬ</button>
                    <button onclick="showP2PAction('sell')" class="p2p-action bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded">ПРОДАТЬ</button>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white border border-gray-200">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b text-left">Продавец</th>
                                <th class="py-2 px-4 border-b text-left">Криптовалюта</th>
                                <th class="py-2 px-4 border-b text-left">Цена (RUB)</th>
                                <th class="py-2 px-4 border-b text-left">Объем</th>
                                <th class="py-2 px-4 border-b text-left">Лимиты (RUB)</th>
                                <th class="py-2 px-4 border-b text-left">Способы оплаты</th>
                                <th class="py-2 px-4 border-b text-left">Действие</th>
                            </tr>
                        </thead>
                        <tbody id="buy-orders">
                            <tr>
                                <td class="py-2 px-4 border-b">user123</td>
                                <td class="py-2 px-4 border-b">USDT</td>
                                <td class="py-2 px-4 border-b">110 RUB</td>
                                <td class="py-2 px-4 border-b">500 USDT</td>
                                <td class="py-2 px-4 border-b">10,000 - 55,000 RUB</td>
                                <td class="py-2 px-4 border-b">сбер, т-банк</td>
                                <td class="py-2 px-4 border-b">
                                    <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-3 rounded">КУПИТЬ</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">trader_x</td>
                                <td class="py-2 px-4 border-b">BTC</td>
                                <td class="py-2 px-4 border-b">12,000,000 RUB</td>
                                <td class="py-2 px-4 border-b">0.1 BTC</td>
                                <td class="py-2 px-4 border-b">500,000 - 1,200,000 RUB</td>
                                <td class="py-2 px-4 border-b">альфа</td>
                                <td class="py-2 px-4 border-b">
                                    <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-3 rounded">КУПИТЬ</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">crypto_guru</td>
                                <td class="py-2 px-4 border-b">USDC</td>
                                <td class="py-2 px-4 border-b">112 RUB</td>
                                <td class="py-2 px-4 border-b">1000 USDC</td>
                                <td class="py-2 px-4 border-b">20,000 - 112,000 RUB</td>
                                <td class="py-2 px-4 border-b">сбер</td>
                                <td class="py-2 px-4 border-b">
                                    <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-3 rounded">КУПИТЬ</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">seller99</td>
                                <td class="py-2 px-4 border-b">USDT</td>
                                <td class="py-2 px-4 border-b">108 RUB</td>
                                <td class="py-2 px-4 border-b">300 USDT</td>
                                <td class="py-2 px-4 border-b">5,000 - 32,400 RUB</td>
                                <td class="py-2 px-4 border-b">втб</td>
                                <td class="py-2 px-4 border-b">
                                    <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-1 px-3 rounded">КУПИТЬ</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">pro_trader</td>
                                <td class="py-2 px-4 border-b">BTC</td>
                                <td class="py-2 px-4 border-b">11,800,000 RUB</td>
                                <td class="py-2 px-4 border-b">0.05 BTC</td>
                                <td class="py-2 px-4 border-b">300,000 - 590,000 RUB</td>
                                <td class="py-2 px-4 border-b">россельхоз</td>
                                <td class="py-2 px-4 border-b">
                                    <button class="bg-green-5 00 hover:bg-green-700 text-white font-bold py-1 px-3 rounded">КУПИТЬ</button>
                                </td>
                            </tr>
                        </tbody>
                        <tbody id="sell-orders" class="hidden">
                            <tr>
                                <td class="py-2 px-4 border-b">buyer123</td>
                                <td class="py-2 px-4 border-b">USDT</td>
                                <td class="py-2 px-4 border-b">105 RUB</td>
                                <td class="py-2 px-4 border-b">400 USDT</td>
                                <td class="py-2 px-4 border-b">8,000 - 42,000 RUB</td>
                                <td class="py-2 px-4 border-b">сбер</td>
                                <td class="py-2 px-4 border-b">
                                    <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-3 rounded">ПРОДАТЬ</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">investor_y</td>
                                <td class="py-2 px-4 border-b">BTC</td>
                                <td class="py-2 px-4 border-b">11,500,000 RUB</td>
                                <td class="py-2 px-4 border-b">0.08 BTC</td>
                                <td class="py-2 px-4 border-b">400,000 - 920,000 RUB</td>
                                <td class="py-2 px-4 border-b">т-банк</td>
                                <td class="py-2 px-4 border-b">
                                    <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-3 rounded">ПРОДАТЬ</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">crypto_buyer</td>
                                <td class="py-2 px-4 border-b">USDC</td>
                                <td class="py-2 px-4 border-b">107 RUB</td>
                                <td class="py-2 px-4 border-b">800 USDC</td>
                                <td class="py-2 px-4 border-b">15,000 - 85,600 RUB</td>
                                <td class="py-2 px-4 border-b">альфа</td>
                                <td class="py-2 px-4 border-b">
                                    <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-3 rounded">ПРОДАТЬ</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">buyer77</td>
                                <td class="py-2 px-4 border-b">USDT</td>
                                <td class="py-2 px-4 border-b">103 RUB</td>
                                <td class="py-2 px-4 border-b">600 USDT</td>
                                <td class="py-2 px-4 border-b">10,000 - 61,800 RUB</td>
                                <td class="py-2 px-4 border-b">втб</td>
                                <td class="py-2 px-4 border-b">
                                    <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-3 rounded">ПРОДАТЬ</button>
                                </td>
                            </tr>
                            <tr>
                                <td class="py-2 px-4 border-b">new_buyer</td>
                                <td class="py-2 px-4 border-b">BTC</td>
                                <td class="py-2 px-4 border-b">11,600,000 RUB</td>
                                <td class="py-2 px-4 border-b">0.03 BTC</td>
                                <td class="py-2 px-4 border-b">200,000 - 348,000 RUB</td>
                                <td class="py-2 px-4 border-b">россельхоз</td>
                                <td class="py-2 px-4 border-b">
                                    <button class="bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-3 rounded">ПРОДАТЬ</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="chat" class="page bg-white shadow-md rounded-lg p-6 hidden">
                <h2 class="text-2xl font-semibold mb-4">Чат</h2>
                <div class="bg-gray-100 p-4 rounded-lg">
                    <h3 class="text-xl font-medium mb-2">Трейдинг Чат</h3>
                    <p class="mb-4">Обсуждение сделок с другими пользователями</p>
                    <div class="chat-messages">
                        <div class="chat-message">
                            <span class="username">User123</span>
                            <span class="time">08:52</span>
                            <p>Взял лонг на BTC!</p>
                        </div>
                        <div class="chat-message">
                            <span class="username">User123</span>
                            <span class="time">08:53</span>
                            <p>Тейк на 89000</p>
                        </div>
                        <div class="chat-message">
                            <span class="username">User123</span>
                            <span class="time">08:54</span>
                            <p>Хорошая точка входа!</p>
                        </div>
                        <div class="chat-message">
                            <span class="username">TraderPro</span>
                            <span class="time">09:15</span>
                            <p>BTC тестирует сопротивление на 65k. Если пробьет, ждем 68k.</p>
                        </div>
                        <div class="chat-message">
                            <span class="username">TraderPro</span>
                            <span class="time">09:16</span>
                            <p>Какие индикаторы используете?</p>
                        </div>
                        <div class="chat-message">
                            <span class="username">TraderPro</span>
                            <span class="time">09:17</span>
                            <p>EMA 50/200, RSI, Volume Profile. RSI сейчас 58.</p>
                        </div>
                    </div>
                    <div class="mt-4 flex gap-2">
                        <input type="text" placeholder="Введите сообщение..." class="flex-1 p-2 rounded-md border-gray-300 shadow-sm focus:border-sky-400 focus:ring-sky-400">
                        <button class="bg-sky-300 hover:bg-sky-500 text-white font-bold py-2 px-4 rounded" onclick="alert('Функционал отправки сообщений будет добавлен позже.')">Отправить</button>
                    </div>
                </div>
            </section>

            <section id="support" class="page bg-white shadow-md rounded-lg p-6 hidden">
                <h2 class="text-2xl font-semibold mb-4">Поддержка</h2>
                <p class="mb-4">Свяжитесь с нами, если у вас возникли вопросы</p>
                <div class="mb-6">
                    <h3 class="text-xl font-medium mb-2">Контактная информация</h3>
                    <p><strong>Телефон:</strong> +7 (473) 200-01-01</p>
                    <p><strong>Адрес:</strong> г. Воронеж, ул. Ленина, д. 1</p>
                    <p><strong>Email:</strong> <a href="mailto:support@cryptooborot.ru" class="text-sky-400 hover:underline">support@cryptooborot.ru</a></p>
                </div>
                <div class="mb-6">
                    <h3 class="text-xl font-medium mb-2">Наши Telegram-каналы</h3>
                    <p><strong>Основной:</strong> <a href="https://t.me/CryptoOborotMain" class="text-sky-400 hover:underline">@CryptoOborotMain</a></p>
                    <p><strong>Новостной:</strong> <a href="https://t.me/CryptoOborotNews" class="text-sky-400 hover:underline">@CryptoOborotNews</a></p>
                    <p><strong>Сделки:</strong> <a href="https://t.me/CryptoOborotTrades" class="text-sky-400 hover:underline">@CryptoOborotTrades</a></p>
                    <p><strong>Обсуждения:</strong> <a href="https://t.me/CryptoOborotChat" class="text-sky-400 hover:underline">@CryptoOborotChat</a></p>
                </div>
                <div>
                    <h3 class="text-xl font-medium mb-2">Часто задаваемые вопросы</h3>
                    <div class="mb-4">
                        <p class="font-medium">Обязательно ли надо регистрироваться?</p>
                        <p>Да, регистрация необходима для доступа к торговле, P2P-обмену и другим функциям платформы. Это также помогает нам обеспечить безопасность ваших операций.</p>
                    </div>
                    <div class="mb-4">
                        <p class="font-medium">Нужно ли сдавать отчётность в налоговую?</p>
                        <p>Да, в России доходы от операций с криптовалютой подлежат налогообложению. Мы предоставляем раздел "Налоги" для расчёта, но рекомендуем проконсультироваться с налоговым специалистом.</p>
                    </div>
                    <div>
                        <p class="font-medium">Почему нет графиков?</p>
                        <p>Графики есть в разделе "Торговля", но если вы их не видите, возможно, это связано с настройками браузера или блокировкой скриптов. Попробуйте очистить кэш или отключить блокировщики рекламы.</p>
                    </div>
                </div>
            </section>
        </main>

        <footer class="bg-gray-800 text-white text-center p-4 mt-8">
            <p>© 2025 Криптообменник. Все права защищены.</p>
        </footer>
    </div>

    <script>
        function showLoginPage() {
            document.getElementById('welcome-page').classList.add('hidden');
            document.getElementById('login-page').classList.remove('hidden');
        }

        function showRegisterPage() {
            document.getElementById('login-page').classList.add('hidden');
            document.getElementById('register-page').classList.remove('hidden');
        }

        function login() {
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            if (username.trim() === '' || password.trim() === '') {
                alert('Пожалуйста, введите логин и пароль.');
                return;
            }
            document.getElementById('username-display').textContent = username;
            document.getElementById('login-page').classList.add('hidden');
            document.getElementById('main-content').classList.remove('hidden');
            showPage('transactions');
            drawBitcoinChart();
        }

        function register() {
            const name = document.getElementById('register-name').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const phone = document.getElementById('register-phone').value;
            if (name.trim() === '' || email.trim() === '' || password.trim() === '' || phone.trim() === '') {
                alert('Пожалуйста, заполните все поля.');
                return;
            }
            alert('Регистрация успешна! Теперь вы можете войти.');
            document.getElementById('register-page').classList.add('hidden');
            document.getElementById('login-page').classList.remove('hidden');
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => page.classList.add('hidden'));
            document.getElementById(pageId).classList.remove('hidden');
            if (pageId === 'transactions') {
                drawBitcoinChart();
            }
        }

        function drawBitcoinChart() {
            const canvas = document.getElementById('bitcoinChart');
            const ctx = canvas.getContext('2d');

            canvas.width = canvas.offsetWidth;
            canvas.height = 300;

            const prices = [65000, 66000, 65500, 67000, 66500, 68000, 67500];
            const dates = ['25.04', '26.04', '27.04', '28.04', '29.04', '30.04', '01.05'];
            const maxPrice = Math.max(...prices);
            const minPrice = Math.min(...prices);
            const priceRange = maxPrice - minPrice;
            const stepX = canvas.width / (prices.length - 1);
            const stepY = canvas.height / priceRange;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            ctx.beginPath();
            ctx.strokeStyle = '#d1d5db';
            ctx.lineWidth = 1;
            ctx.moveTo(40, 0);
            ctx.lineTo(40, canvas.height - 30);
            ctx.lineTo(canvas.width, canvas.height - 30);
            ctx.stroke();

            ctx.fillStyle = '#6b7280';
            ctx.font = '12px Roboto';
            ctx.textAlign = 'center';
            for (let i = 0; i < dates.length; i++) {
                ctx.fillText(dates[i], 40 + i * stepX, canvas.height - 10);
            }

            ctx.textAlign = 'right';
            const priceStep = priceRange / 5;
            for (let i = 0; i <= 5; i++) {
                const price = minPrice + i * priceStep;
                const y = canvas.height - 30 - (price - minPrice) * stepY;
                ctx.fillText(Math.round(price), 35, y + 5);
                ctx.beginPath();
                ctx.moveTo(40, y);
                ctx.lineTo(canvas.width, y);
                ctx.strokeStyle = '#f3f4f6';
                ctx.stroke();
            }

            ctx.beginPath();
            ctx.strokeStyle = '#38bdf8';
            ctx.lineWidth = 2;
            for (let i = 0; i < prices.length; i++) {
                const x = 40 + i * stepX;
                const y = canvas.height - 30 - (prices[i] - minPrice) * stepY;
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();

            for (let i = 0; i < prices.length; i++) {
                const x = 40 + i * stepX;
                const y = canvas.height - 30 - (prices[i] - minPrice) * stepY;
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, 2 * Math.PI);
                ctx.fillStyle = '#38bdf8';
                ctx.fill();
            }
        }

        function showTaxSection(sectionId) {
            document.querySelectorAll('.tax-section').forEach(section => section.classList.add('hidden'));
            document.getElementById(sectionId).classList.remove('hidden');

            document.querySelectorAll('.tax-tab').forEach(tab => {
                tab.classList.remove('bg-sky-300', 'hover:bg-sky-500', 'text-white');
                tab.classList.add('bg-gray-300', 'hover:bg-gray-400', 'text-gray-700');
            });

            const activeTab = document.querySelector(`[onclick="showTaxSection('${sectionId}')"]`);
            activeTab.classList.remove('bg-gray-300', 'hover:bg-gray-400', 'text-gray-700');
            activeTab.classList.add('bg-sky-300', 'hover:bg-sky-500', 'text-white');
        }

        function showP2PAction(action) {
            document.querySelectorAll('.p2p-action').forEach(tab => {
                tab.classList.remove('bg-sky-300', 'text-white');
                tab.classList.add('bg-gray-300', 'text-gray-700');
            });

            const activeTab = document.querySelector(`[onclick="showP2PAction('${action}')"]`);
            activeTab.classList.remove('bg-gray-300', 'text-gray-700');
            activeTab.classList.add('bg-sky-300', 'text-white');

            if (action === 'buy') {
                document.getElementById('buy-orders').classList.remove('hidden');
                document.getElementById('sell-orders').classList.add('hidden');
            } else {
                document.getElementById('buy-orders').classList.add('hidden');
                document.getElementById('sell-orders').classList.remove('hidden');
            }
        }

        function updateTradingPair() {
            const pair = document.getElementById('trading-pair').value;
            const token = pair.split('/')[0];
            document.getElementById('amount-token').textContent = token;
            updateSliderMax();
            updateOrderVolume();
        }

        function updateSliderMax() {
            const pair = document.getElementById('trading-pair').value;
            const token = pair.split('/')[0];
            let maxAmount;
            switch(token) {
                case 'BTC': maxAmount = 1; break;
                case 'ETH': maxAmount = 10; break;
                case 'DOGE': maxAmount = 100000; break;
                case 'SOL': maxAmount = 100; break;
                case '$UD': maxAmount = 1000; break;
                default: maxAmount = 100;
            }
            const slider = document.getElementById('amount-slider');
            slider.max = maxAmount;
            const amount = parseFloat(document.getElementById('amount').value) || 0;
            if (amount > maxAmount) {
                document.getElementById('amount').value = maxAmount;
                slider.value = maxAmount;
            }
            updateOrderVolume();
        }

        function updateAmount() {
            const slider = document.getElementById('amount-slider');
            const amountInput = document.getElementById('amount');
            const maxAmount = parseFloat(slider.max);
            let value = parseFloat(slider.value);

            if (value < 0) value = 0;
            if (value > maxAmount) value = maxAmount;

            amountInput.value = value.toFixed(6);
            slider.value = value;
            updateOrderVolume();
        }

        function updateSlider() {
            const amountInput = document.getElementById('amount');
            const slider = document.getElementById('amount-slider');
            const maxAmount = parseFloat(slider.max);
            let value = parseFloat(amountInput.value) || 0;

            if (value < 0) value = 0;
            if (value > maxAmount) value = maxAmount;

            amountInput.value = value.toFixed(6);
            slider.value = value;
        }

        function updateOrderType() {
            const orderType = document.getElementById('order-type').value;
            const limitPriceSection = document.getElementById('limit-price-section');
            const stopPriceSection = document.getElementById('stop-price-section');

            if (orderType === 'limit' || orderType === 'stop-limit') {
                limitPriceSection.classList.remove('hidden');
            } else {
                limitPriceSection.classList.add('hidden');
            }

            if (orderType === 'stop-limit' || orderType === 'stop-market') {
                stopPriceSection.classList.remove('hidden');
            } else {
                stopPriceSection.classList.add('hidden');
            }

            updateOrderVolume();
        }

        function updateOrderVolume() {
            const orderType = document.getElementById('order-type').value;
            const amount = parseFloat(document.getElementById('amount').value) || 0;
            const orderVolumeSelect = document.getElementById('order-volume-select');
            let volume;

            if (orderType === 'limit' || orderType === 'stop-limit') {
                const price = parseFloat(document.getElementById('limit-price').value) || 0;
                volume = (amount * price).toFixed(2);
                orderVolumeSelect.value = volume <= 10000 ? volume : 0;
            } else {
                volume = 'N/A (Рыночный)';
                orderVolumeSelect.value = 0;
            }
        }

        function updateAmountFromVolume() {
            const orderType = document.getElementById('order-type').value;
            const volume = parseFloat(document.getElementById('order-volume-select').value) || 0;
            const amountInput = document.getElementById('amount');
            const slider = document.getElementById('amount-slider');
            const maxAmount = parseFloat(slider.max);

            if (orderType === 'limit' || orderType === 'stop-limit') {
                const price = parseFloat(document.getElementById('limit-price').value) || 1;
                let amount = (volume / price).toFixed(6);
                if (amount > maxAmount) amount = maxAmount;
                amountInput.value = amount;
                slider.value = amount;
            } else {
                amountInput.value = 0;
                slider.value = 0;
            }
        }

        function toggleTradeAction(action) {
            const buyButton = document.getElementById('buy-button');
            const sellButton = document.getElementById('sell-button');

            if (action === 'buy') {
                buyButton.classList.remove('bg-gray-300', 'text-gray-700');
                buyButton.classList.add('bg-green-500', 'text-white');
                sellButton.classList.remove('bg-red-500', 'text-white');
                sellButton.classList.add('bg-gray-300', 'text-gray-700');
            } else {
                sellButton.classList.remove('bg-gray-300', 'text-gray-700');
                sellButton.classList.add('bg-red-500', 'text-white');
                buyButton.classList.remove('bg-green-500', 'text-white');
                buyButton.classList.add('bg-gray-300', 'text-gray-700');
            }
        }

        function toggleProfile() {
            const profileModal = document.getElementById('profile-modal');
            const overlay = document.getElementById('profile-overlay');
            const button = document.querySelector('button[onclick="toggleProfile()"]');
            if (profileModal.classList.contains('hidden')) {
                profileModal.classList.remove('hidden');
                overlay.classList.remove('hidden');
                button.textContent = 'Скрыть профиль';
            } else {
                profileModal.classList.add('hidden');
                overlay.classList.add('hidden');
                button.textContent = 'Показать профиль';
            }
        }

        showTaxSection('purchases');
        showP2PAction('buy');
        toggleTradeAction('buy');
        updateTradingPair();
        updateOrderType();
    </script>
</body>
</html>